<head>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />>
        <!--Get your code at fontawesome.com-->
        </head>
<div  class="eya" id="div1" >
        <ul> <li class="nav-item" >
                <a href="/admin/Add" class="nav-link" routerLink="/admin/Add">Add</a>
              </li>  
            </ul>    
        <table id="users">
          <thead>
            <tr>
            <th> Ref</th>
            <th> Prestation</th>
            <th> Element</th>
            <th> Date début</th>
            <th> Date Expiration</th>
            <th> PU (€)</th>
            <th> Type pénalité</th>
            <th> Pénalité</th>
            <th> </th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let bpu of bpus; let i = index" [class.active]="i == currentIndex" (click)="setActiveBpu(bpu,i)">
                    <td> {{ bpu.refTacheBPU }} </td>
                    <td> {{ bpu.type_prestation }} </td>
                    <td> {{ bpu.type_element }} </td>
                    <td> {{ bpu.dateDebut}} </td>
                    <td> {{ bpu.dateExpiration }} </td>       
                    <td> {{ bpu.pu}} </td>
                    <td> {{ bpu.type_penalite }} </td>
                    <td> {{ bpu.penalite }} </td>   
              <td> 
                  <button class="material-symbols-outlined" data-bs-toggle="modal" data-bs-target="#staticBackdrop">edit_note</button>
               </td>
    
    
            </tr>
          </tbody>
        </table>
      <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">MAJ Ticket</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              
              
              <fieldset class="border p-2">
                <legend class="w-auto">
                </legend>
                <table class="table-add">
                    <tr class="tr1">
                            <div class="td2">
                                    <td>Ref tache BPU</td>
                                      </div>
                                    <td><div class="col-sm-10">
                                      <input type="text"
                                      class="form-control"
                                      id="refTacheBPU"
                                      required
                                      [(ngModel)]="currentBpu.refTacheBPU"
                                      name="refTacheBPU">
                                    </div></td>
                  
                                    <div class="td2"> 
                                            <td>Type Prestation</td>
                                          </div>   
                                          <td>
                                              <div class="col-sm-10">
                                                  <select name="pets" id="pet-select" [(ngModel)]="currentBpu.type_prestation" (change)="onPrestationChange()"><option value="">
                                                      --Please choose an option--  </option>
                                                  <option value="ESIMB" >ESIMB</option>
                                                  <option value="NROPM">NRO-PM</option>
                                                  <option value="DESAT">DESAT</option>
                                                  <option value="BRAME">BRAME</option>
                                                  <option value="GRAFIC">GRAFIC</option>
                                                </select>
                                              </div>
                                          </td>
                                          <div class="td2">
                                                <td>Element</td>
                                            </div>
                                            <td><div class="col-sm-10">
                                                  <input class="form-control"
                                                   type="text"
                                                   id="element"
                                                   name="element"
                                                   required
                                                   [(ngModel)]="currentBpu.type_element" >
                                                </div>
                                            </td>  
                     </tr>
                  <br>
                  
                  <tr class="tr1">
                        <div class="td2"> 
                                <td>Date Debut</td>
                              </div>   
                                    <td><div class="col-sm-10">
                                        <input type="text"
                                        class="form-control"
                                        id="dateDebut"
                                        required
                                        [(ngModel)]="currentBpu.dateDebut" 
                                        name="dateDebut">
                                      </div>
                                    </td>
                                    <div class="td2"> 
                                    <td>Date validite</td>
                                    </div>
                                <td><div class="col-sm-10">
                                  <input type="date"
                                  class="form-control"
                                  id="dateValidite"
                                  required
                                  [(ngModel)]="currentBpu.dateValidite"
                                  name="dateValidite">
                                </div></td>
            
                                <div class="td2"> 
                                <td>Date Expiration</td>
                                </div>
                                <td><div class="col-sm-10">
                                  <input type="text"
                                  class="form-control"
                                  id="dateExpiration"
                                  required
                                  [(ngModel)]="currentBpu.dateExpiration"
                                  name="dateExpiration">
                                  
                                </div></td>
                     </tr>
                  <br>
                  
                  
                  <tr class="tr1">
                        <div class="td2"> 
                                <td>PU (€)</td>
                              </div>   
                                    <td><div class="col-sm-10">
                                        <input type="number" step=0.01 min="0"
                                        class="form-control"
                                        id="PU (€)"
                                        required
                                        [(ngModel)]="currentBpu.pu"
                                        name="PU (€)">
                                      </div>
                                    </td>
                          
                            <div class="td2">
                                <td>Type pénalité</td>
                              </div>
                              <td>
                                  <div class="col-sm-10">
                                      <select name="pets" id="pet-select" [(ngModel)]="currentBpu.type_penalite" (change)="onPenaliteChange()"><option value="">
                                          --Please choose an option--  </option>
                                      <option value="variable" >Variable</option>
                                      <option value="fixe">Fixe</option>
                                    </select>
                                  </div>
                              </td>
        
                              <div class="td2">
                                  <td>Penalité</td>
                                </div>
                                <td>
                                    <div class="col-sm-10">
                                <input [(ngModel)]="currentBpu.penalite" 
                                [ngClass]="{'percent': currentBpu.type_penalite === 'variable', 'dollar': currentBpu.type_penalite === 'fixe'}" 
                                (keypress)="onlyNumberKey($event)"
                                 type="text"
                                 min="0"
                                 step=0.1>
                                    </div>
                                </td>
                     </tr>
                  <br>
                  </table>
              </fieldset>
           
      
      
      
              
            </div>
            <div class="modal-footer">
              <button type="submit" class="btn btn-primary"  (click) ="updateBPU()">Update</button>
              <p>{{ message }}</p>
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      </div>

